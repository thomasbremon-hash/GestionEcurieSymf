{% extends 'layouts/base.admin.html.twig' %}
{% block title %}
	BackOffice | Liste distance
{% endblock %}

{% block body %}
	<section class="section is-title-bar">
		<div class="level">
			<div class="level-left">
				<div class="level-item">
					<ul>
						<li>Admin</li>
						<li>Distance</li>
					</ul>
				</div>
			</div>
			<div class="level-right">
				<a href="{{ path('app_admin_distance_new') }}" class="button is-small is-primary">
					<span>Ajouter</span>
					<span class="icon">
						<i class="mdi mdi-plus"></i>
					</span>
				</a>
			</div>
		</div>
	</section>
	<section class="section is-main-section">
		{% for label, messages in app.flashes(['success', 'danger']) %}
			{% for message in messages %}
				<div class="notification is-{{ label }}">
					<button class="delete"></button>
					{{ message }}
				</div>
			{% endfor %}
		{% endfor %}

		<div class="card has-table">
			<header class="card-header">
				<p class="card-header-title">
					<span class="icon">
						<span class="mdi mdi-shopping-outline"></span>
					</span>
					{{ distances|length }}
					Distance
				</p>
				<a href="#" class="card-header-icon">
					<span class="icon">
						<i class="mdi mdi-reload"></i>
					</span>
				</a>
			</header>
			<div class="card-content">
				<div class="b-table has-pagination">
					<div class="table-wrapper has-mobile-cards">
						<table class="table is-fullwidth is-striped is-hoverable is-fullwidth" id="table">
							<thead>
								<tr>
									<th>Distance</th>
									<th>Entreprise</th>
									<th>Structure</th>
									<th></th>
								</tr>
							</thead>

							<tbody>
								{% for item in distances %}
									<tr>
										<td data-label="Distance">
											{{ item.distance }}
											km
										</td>

										<td data-label="Entreprise">
											{% if item.entreprise %}
												<span class="tag is-info">
													{{ item.entreprise.nom }}
												</span>
											{% else %}
												<span class="tag is-light">—</span>
											{% endif %}
										</td>

										<td data-label="Structure">
											{% if item.structure %}
												<span class="tag is-info">
													{{ item.structure.nom }}
												</span>
											{% else %}
												<span class="tag is-light">—</span>
											{% endif %}
										</td>

										<td class="is-actions-cell">
											<div class="buttons is-right">
												<a href="{{ path('app_admin_distance_update', { id: item.id }) }}" class="button is-small is-primary">
													<span class="icon">
														<i class="mdi mdi-pencil"></i>
													</span>
												</a>

												<button class="button is-small is-danger jb-modal" data-target="sample-modal-{{ item.id }}">
													<span class="icon">
														<i class="mdi mdi-trash-can"></i>
													</span>
												</button>
											</div>
										</td>
									</tr>

									{# Modal de suppression ici si besoin #}
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}
